/********************************************************/
//
//  概要
//      WDT関連
//  作成者
//		K.ishimori @ TUTrobo
//
/********************************************************/

#include "../setup.h"		//マイコンの設定

/********************************************************/
//  名前      
//		wdt_init	
//  概要
//      WDT関連
//  機能説明
//		WDTの初期設定
//  パラメタ説明
//		なし
//  戻り値
//		なし
//  作成者
//		TUTrobo
//
/********************************************************/
void wdt_init(void)
{
	
	WDT.WRITE.WTCNT = 0x5a00;	//カウントを0に設定
	WDT.WRITE.WTCSR = 0xa5c7;	//ウォッチドッグタイマモードでパワーオンリセット
								//周期はPφ/4096（41.943 	ms）に設定
	
								//0： Pφ 		（10.24		us）
								//1： Pφ/4 	（40.96		us）
								//2： Pφ/16 	（168.34	us）
								//3： Pφ/32 	（327.68	us）
								//4： Pφ/64 	（655.36	us）
								//5： Pφ/256 	（2.6214	ms）
								//6： Pφ/1024 	（10.486	ms）
								//7： Pφ/4096 	（41.943 	ms）
	
}

/********************************************************/
//  名前      
//		wdt_reset	
//  概要
//      WDT関連
//  機能説明
//		WDTのカウントリセット
//  パラメタ説明
//		なし
//  戻り値
//		なし
//  作成者
//		TUTrobo
//
/********************************************************/
void wdt_reset(void)
{
	
	WDT.WRITE.WTCNT = 0x5a00;		//カウントリセット
	
}

/********************************************************/
//  名前      
//		wdt_init	
//  概要
//      WDT関連
//  機能説明
//		WDTの初期設定
//  パラメタ説明
//		なし
//  戻り値
//		なし
//  作成者
//		TUTrobo
//
/********************************************************/
void wdt_stop(void)
{
	
	WDT.WRITE.WTCNT = 0x5a00;	//カウントを0に設定
	WDT.WRITE.WTCSR = 0xa547;	//ウォッチドッグタイマモードでパワーオンリセット
								//周期はPφ/4096（41.943 	ms）に設定
	
								//0： Pφ 		（10.24		us）
								//1： Pφ/4 	（40.96		us）
								//2： Pφ/16 	（168.34	us）
								//3： Pφ/32 	（327.68	us）
								//4： Pφ/64 	（655.36	us）
								//5： Pφ/256 	（2.6214	ms）
								//6： Pφ/1024 	（10.486	ms）
								//7： Pφ/4096 	（41.943 	ms）
	
}
